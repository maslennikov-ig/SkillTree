# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Supabase PostgreSQL connection string (Transaction pooler - port 6543)
# Get from: Supabase Dashboard → Settings → Database → Connection string → Transaction pooler (port 6543)
# IMPORTANT: Must include ?sslmode=require for SSL/TLS encryption
DATABASE_URL="postgresql://postgres.[PROJECT-REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres?sslmode=require"

# Direct connection for Prisma migrations (Session pooler - port 5432)
# Get from: Supabase Dashboard → Settings → Database → Connection string → Session pooler (port 5432)
# REQUIRED: Prisma needs this for schema changes (migrate, db push)
DIRECT_URL="postgresql://postgres.[PROJECT-REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:5432/postgres?sslmode=require"

# Supabase project URL
# Get from: Supabase Dashboard → Settings → API → Project URL
SUPABASE_URL="https://[PROJECT-ID].supabase.co"

# Supabase anonymous key
# Get from: Supabase Dashboard → Settings → API → Project API keys → anon public
SUPABASE_ANON_KEY="[YOUR-ANON-KEY]"

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis connection URL (local development: localhost, production: VDS with password)
# Development: redis://localhost:6379
# Production: redis://:PASSWORD@localhost:6379
REDIS_URL="redis://localhost:6379"

# =============================================================================
# GITHUB WEBHOOK (Deployment Pipeline)
# =============================================================================

# Shared secret for GitHub webhook signature verification
# Generate with: openssl rand -hex 32
# Configure in: GitHub Repository → Settings → Webhooks → Secret
GITHUB_WEBHOOK_SECRET=""

# =============================================================================
# TELEGRAM BOT
# =============================================================================

# Telegram bot API token
# Get from: @BotFather on Telegram
TELEGRAM_BOT_TOKEN=""

# Admin chat ID for deployment notifications and alerts
# Get from: Send message to your bot, then curl https://api.telegram.org/bot<TOKEN>/getUpdates
ADMIN_CHAT_ID=""

# =============================================================================
# EMAIL SERVICE (SendPulse - 12K free emails/month)
# =============================================================================

# SendPulse API credentials
# Get from: https://login.sendpulse.com/settings/#api
SENDPULSE_API_USER_ID=""
SENDPULSE_API_SECRET=""

# SendPulse SMTP settings (alternative to API)
SENDPULSE_SMTP_HOST="smtp-pulse.com"
SENDPULSE_SMTP_PORT=465
SENDPULSE_SMTP_USER=""
SENDPULSE_SMTP_PASSWORD=""

# Sender email address (must be verified in SendPulse)
EMAIL_FROM="noreply@skilltree.ru"
EMAIL_FROM_NAME="SkillTree"

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable/disable features for gradual rollout
FEATURE_GAMIFICATION_ENABLED=true
FEATURE_PARENT_REPORTS_ENABLED=true
FEATURE_EMAIL_VERIFICATION_ENABLED=true
FEATURE_REFERRAL_SYSTEM_ENABLED=true
FEATURE_SHARE_CARDS_ENABLED=true

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Node environment (development | production | test)
NODE_ENV="development"

# API server port (default: 4000)
PORT=4000

# API URL for bot to call API endpoints (Share, PDF, Email features)
# Development: http://localhost:4000
# Production: https://api.skilltree.ru or internal URL
API_URL="http://localhost:4000"
